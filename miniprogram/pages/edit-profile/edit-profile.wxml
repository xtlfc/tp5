<!--pages/edit-profile/edit-profile.wxml-->
<view class="container">
  <!-- å¤´åƒç¼–è¾‘ -->
  <view class="avatar-section">
    <view class="avatar-container">
      <image class="avatar" src="{{userInfo.avatarUrl}}" mode="aspectFill"></image>
      <view class="avatar-edit-btn" bindtap="chooseAvatar">
        <text class="edit-icon">ğŸ“·</text>
      </view>
    </view>
    <text class="avatar-tip">ç‚¹å‡»æ›´æ¢å¤´åƒ</text>
  </view>

  <!-- åŸºæœ¬ä¿¡æ¯ -->
  <view class="form-section">
    <view class="section-title">åŸºæœ¬ä¿¡æ¯</view>
    
    <view class="form-item">
      <text class="form-label">æ˜µç§°</text>
      <input 
        class="form-input" 
        value="{{userInfo.nickName}}"
        placeholder="è¯·è¾“å…¥æ˜µç§°"
        bindinput="onNickNameChange"
        maxlength="20"
      />
    </view>

    <view class="form-item">
      <text class="form-label">æ€§åˆ«</text>
      <picker 
        class="form-picker" 
        range="{{genderOptions}}" 
        value="{{genderIndex}}"
        bindchange="onGenderChange"
      >
        <view class="picker-text">{{genderOptions[genderIndex]}}</view>
      </picker>
    </view>

    <view class="form-item">
      <text class="form-label">å¹´é¾„</text>
      <picker 
        class="form-picker" 
        range="{{ageOptions}}" 
        value="{{ageIndex}}"
        bindchange="onAgeChange"
      >
        <view class="picker-text">{{ageOptions[ageIndex]}}</view>
      </picker>
    </view>

    <view class="form-item">
      <text class="form-label">åŸå¸‚</text>
      <picker 
        class="form-picker" 
        mode="region" 
        value="{{region}}"
        bindchange="onRegionChange"
      >
        <view class="picker-text">{{regionText}}</view>
      </picker>
    </view>
  </view>

  <!-- ä¸ªäººä»‹ç» -->
  <view class="form-section">
    <view class="section-title">ä¸ªäººä»‹ç»</view>
    
    <view class="form-item">
      <textarea 
        class="form-textarea" 
        value="{{userInfo.bio}}"
        placeholder="ä»‹ç»ä¸€ä¸‹è‡ªå·±å§..."
        bindinput="onBioChange"
        maxlength="200"
        auto-height
      ></textarea>
      <text class="char-count">{{userInfo.bio.length}}/200</text>
    </view>
  </view>

  <!-- å…´è¶£çˆ±å¥½ -->
  <view class="form-section">
    <view class="section-title">å…´è¶£çˆ±å¥½</view>
    
    <view class="hobby-tags">
      <view 
        class="hobby-tag {{item.selected ? 'selected' : ''}}"
        wx:for="{{hobbyOptions}}" 
        wx:key="id"
        bindtap="toggleHobby"
        data-id="{{item.id}}"
      >
        <text class="tag-text">{{item.name}}</text>
      </view>
    </view>
  </view>

  <!-- éšç§è®¾ç½® -->
  <view class="form-section">
    <view class="section-title">éšç§è®¾ç½®</view>
    
    <view class="form-item">
      <text class="form-label">ä½ç½®å¯è§</text>
      <switch 
        class="form-switch" 
        checked="{{userInfo.locationVisible}}"
        bindchange="onLocationVisibleChange"
      />
    </view>

    <view class="form-item">
      <text class="form-label">åœ¨çº¿çŠ¶æ€</text>
      <switch 
        class="form-switch" 
        checked="{{userInfo.onlineVisible}}"
        bindchange="onOnlineVisibleChange"
      />
    </view>
  </view>

  <!-- ä¿å­˜æŒ‰é’® -->
  <view class="save-section">
    <button class="save-btn btn-primary" bindtap="saveProfile" loading="{{isSaving}}">
      {{isSaving ? 'ä¿å­˜ä¸­...' : 'ä¿å­˜èµ„æ–™'}}
    </button>
  </view>
</view>