<!--pages/chat/chat-simple.wxml-->
<view class="chat-container">
  <!-- èŠå¤©å¤´éƒ¨ -->
  <view class="chat-header">
    <view class="header-left">
      <button class="back-btn" bindtap="goBack">
        <text class="back-icon">â€¹</text>
      </button>
    </view>
    
    <view class="header-center">
      <image class="user-avatar" src="{{matchedUser.avatarUrl}}" mode="aspectFill"></image>
      <view class="user-info">
        <text class="user-name">{{matchedUser.nickName}}</text>
        <text class="user-status">{{userStatus}}</text>
      </view>
    </view>
    
    <view class="header-right">
      <button class="header-btn" bindtap="startVideoCall">
        <text class="header-icon">ğŸ“¹</text>
      </button>
      <button class="header-btn" bindtap="startVoiceCall">
        <text class="header-icon">ğŸ“</text>
      </button>
    </view>
  </view>

  <!-- èŠå¤©æ¶ˆæ¯åˆ—è¡¨ -->
  <scroll-view class="chat-messages" scroll-y="true">
    <view class="message-list">
      <view class="message-item" wx:for="{{messages}}" wx:key="id">
        <view class="message-content {{item.isSelf ? 'self' : 'other'}}">
          <image class="message-avatar" src="{{item.isSelf ? userInfo.avatarUrl : matchedUser.avatarUrl}}" mode="aspectFill"></image>
          <view class="message-bubble">
            <text class="message-text">{{item.content}}</text>
          </view>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- è¾“å…¥åŒºåŸŸ -->
  <view class="chat-input">
    <view class="input-container">
      <input class="message-input" placeholder="è¾“å…¥æ¶ˆæ¯..." value="{{inputMessage}}" bindinput="onInputChange" />
      <button class="send-btn" bindtap="sendMessage">å‘é€</button>
    </view>
  </view>
</view>