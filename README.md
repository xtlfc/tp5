# 缘分骰子 - 微信交友小程序

一款基于摇骰子玩法的微信交友小程序，用户可以通过摇动手机或点击骰子来匹配相同点数的附近异性用户。

## 功能特色

### 🎲 摇骰子交友
- 摇动手机自动检测开始游戏
- 点击骰子也可开始游戏
- 3D骰子动画效果
- 1-6点随机结果

### 👫 智能匹配
- 基于骰子点数匹配
- 只匹配异性用户
- 按距离远近排序
- 实时地理位置定位

### 💬 阅后即焚聊天
- 消息阅读后30秒自动销毁
- 支持文字、图片、语音消息
- 实时聊天体验
- 保护用户隐私

### 🔐 微信快速登录
- 一键微信授权登录
- 安全可靠的身份认证
- 自动获取用户基本信息

## 技术架构

### 前端技术
- **框架**: 微信小程序原生开发
- **语言**: JavaScript + WXML + WXSS
- **组件**: 自定义组件开发
- **动画**: CSS3动画 + 微信动画API
- **传感器**: 加速度计检测摇动

### 核心功能实现
- **摇动检测**: 使用加速度计API检测手机摇动
- **地理定位**: 微信地理位置API获取用户位置
- **距离计算**: 经纬度计算两点间距离
- **消息销毁**: 定时器实现阅后即焚
- **数据存储**: 微信本地存储API

## 项目结构

```
├── app.js                 # 小程序入口文件
├── app.json              # 全局配置
├── app.wxss              # 全局样式
├── sitemap.json          # 搜索配置
├── project.config.json   # 项目配置
├── pages/                # 页面目录
│   ├── index/           # 启动页
│   ├── login/           # 登录页
│   ├── dice/            # 摇骰子页(主页)
│   ├── chat/            # 聊天页
│   └── profile/         # 个人中心
├── images/              # 图片资源
└── utils/               # 工具函数
```

## 页面说明

### 登录页 (pages/login/)
- 微信授权登录
- 隐私政策说明
- 美观的渐变背景

### 摇骰子页 (pages/dice/)
- 主要游戏界面
- 摇动检测和骰子动画
- 匹配结果显示
- 历史记录查看

### 聊天页 (pages/chat/)
- 实时消息聊天
- 阅后即焚机制
- 多媒体消息支持
- 连接状态显示

### 个人中心 (pages/profile/)
- 用户信息展示
- 统计数据查看
- 设置和帮助
- 退出登录

## 开发说明

### 环境要求
- 微信开发者工具
- 有效的小程序AppID
- 微信开发者账号

### 配置步骤
1. 下载微信开发者工具
2. 导入项目代码
3. 修改`project.config.json`中的appid
4. 修改`app.js`中的后端API地址
5. 准备图片资源文件

### 图片资源
需要准备以下图片文件到`images/`目录：
- logo.png - 应用Logo
- dice相关图标
- 用户头像占位图
- 各种功能图标

### 后端接口
需要实现以下API接口：
- `POST /api/auth/login` - 用户登录
- `POST /api/dice/submit` - 提交摇骰结果
- `GET /api/match/find` - 查找匹配用户
- WebSocket聊天服务

## 功能扩展

### 可添加功能
- [ ] 视频通话功能
- [ ] 语音通话功能
- [ ] 用户资料编辑
- [ ] 黑名单功能
- [ ] 举报功能
- [ ] 消息推送
- [ ] 数据统计分析

### 性能优化
- [ ] 图片懒加载
- [ ] 列表虚拟滚动
- [ ] 缓存策略优化
- [ ] 网络请求优化

## 注意事项

1. **隐私保护**: 聊天消息确实会在阅读后销毁，保护用户隐私
2. **位置信息**: 仅用于匹配功能，不会泄露具体位置
3. **内容审核**: 建议添加内容审核机制防止不当内容
4. **用户安全**: 建议添加用户举报和黑名单功能

## 许可证

本项目仅供学习和参考使用，如需商业使用请确保遵守相关法律法规。

## 联系方式

如有问题或建议，欢迎联系开发者。
