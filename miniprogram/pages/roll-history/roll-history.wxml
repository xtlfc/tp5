<!--pages/roll-history/roll-history.wxml-->
<view class="roll-history-container">
  <!-- ç»Ÿè®¡å¤´éƒ¨ -->
  <view class="stats-header">
    <view class="stats-card">
      <view class="stat-item">
        <text class="stat-number">{{totalRolls}}</text>
        <text class="stat-label">æ€»æ‘‡éª°å­</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{todayRolls}}</text>
        <text class="stat-label">ä»Šæ—¥æ‘‡éª°å­</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{successRate}}%</text>
        <text class="stat-label">åŒ¹é…æˆåŠŸç‡</text>
      </view>
    </view>
  </view>

  <!-- å†å²åˆ—è¡¨ -->
  <view class="history-section">
    <view class="section-header">
      <text class="section-title">æ‘‡éª°å­å†å²</text>
      <text class="section-count">å…±{{rollHistory.length}}æ¬¡</text>
    </view>

    <view class="history-list" wx:if="{{rollHistory.length > 0}}">
      <view class="history-item" wx:for="{{rollHistory}}" wx:key="id">
        <view class="history-content">
          <view class="dice-info">
            <text class="dice-number">ğŸ² {{item.diceNumber}}</text>
            <text class="dice-time">{{item.timeText}}</text>
          </view>
          <view class="match-result">
            <text class="result-text {{item.matched ? 'success' : 'failed'}}">
              {{item.matched ? 'åŒ¹é…æˆåŠŸ' : 'æœªåŒ¹é…'}}
            </text>
            <text class="distance-text" wx:if="{{item.matched}}">
              è·ç¦»: {{item.distance}}km
            </text>
          </view>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:else>
      <image class="empty-icon" src="/images/empty-roll.png" mode="aspectFit"></image>
      <text class="empty-text">è¿˜æ²¡æœ‰æ‘‡éª°å­è®°å½•å“¦ï½</text>
      <text class="empty-subtext">å¿«å»æ‘‡éª°å­å¯»æ‰¾ç¼˜åˆ†å§ï¼</text>
      <button class="go-roll-btn btn-primary" bindtap="goToRoll">
        å»æ‘‡éª°å­
      </button>
    </view>
  </view>
</view>