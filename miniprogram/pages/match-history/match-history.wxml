<!--pages/match-history/match-history.wxml-->
<view class="match-history-container">
  <!-- ç»Ÿè®¡å¤´éƒ¨ -->
  <view class="stats-header">
    <view class="stats-card">
      <view class="stat-item">
        <text class="stat-number">{{totalMatches}}</text>
        <text class="stat-label">æ€»åŒ¹é…</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{todayMatches}}</text>
        <text class="stat-label">ä»Šæ—¥åŒ¹é…</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{avgDistance}}km</text>
        <text class="stat-label">å¹³å‡è·ç¦»</text>
      </view>
    </view>
  </view>

  <!-- å†å²åˆ—è¡¨ -->
  <view class="history-section">
    <view class="section-header">
      <text class="section-title">åŒ¹é…å†å²</text>
      <text class="section-count">å…±{{matchHistory.length}}æ¬¡</text>
    </view>

    <view class="history-list" wx:if="{{matchHistory.length > 0}}">
      <view class="history-item" wx:for="{{matchHistory}}" wx:key="id" bindtap="viewMatchDetail" data-match="{{item}}">
        <view class="match-avatar">
          <image class="avatar" src="{{item.matchedUser.avatarUrl}}" mode="aspectFill"></image>
        </view>
        <view class="match-info">
          <view class="match-header">
            <text class="match-name">{{item.matchedUser.nickName}}</text>
            <text class="match-time">{{item.timeText}}</text>
          </view>
          <view class="match-details">
            <text class="match-dice">ğŸ² {{item.diceNumber}}</text>
            <text class="match-distance">è·ç¦»: {{item.distance}}km</text>
          </view>
          <view class="match-status">
            <text class="status-text {{item.isActive ? 'active' : 'inactive'}}">
              {{item.isActive ? 'èŠå¤©ä¸­' : 'å·²ç»“æŸ'}}
            </text>
          </view>
        </view>
        <view class="match-arrow">
          <text class="arrow-icon">></text>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:else>
      <image class="empty-icon" src="/images/empty-match.png" mode="aspectFit"></image>
      <text class="empty-text">è¿˜æ²¡æœ‰åŒ¹é…è®°å½•å“¦ï½</text>
      <text class="empty-subtext">å¿«å»æ‘‡éª°å­å¯»æ‰¾ç¼˜åˆ†å§ï¼</text>
      <button class="go-roll-btn btn-primary" bindtap="goToRoll">
        å»æ‘‡éª°å­
      </button>
    </view>
  </view>
</view>