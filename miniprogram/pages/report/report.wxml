<!--pages/report/report.wxml-->
<view class="container">
  <!-- 被举报用户信息 -->
  <view class="reported-user card">
    <view class="user-info">
      <image class="user-avatar" src="{{reportedUser.avatarUrl}}" mode="aspectFill"></image>
      <view class="user-details">
        <text class="user-name">{{reportedUser.nickName}}</text>
        <text class="user-id">ID: {{reportedUser.openid}}</text>
      </view>
    </view>
  </view>

  <!-- 举报类型 -->
  <view class="form-section">
    <view class="section-title">举报类型</view>
    
    <view class="report-types">
      <view 
        class="report-type {{selectedType === item.id ? 'selected' : ''}}"
        wx:for="{{reportTypes}}" 
        wx:key="id"
        bindtap="selectReportType"
        data-id="{{item.id}}"
      >
        <text class="type-icon">{{item.icon}}</text>
        <view class="type-info">
          <text class="type-name">{{item.name}}</text>
          <text class="type-desc">{{item.description}}</text>
        </view>
        <text class="type-check">✓</text>
      </view>
    </view>
  </view>

  <!-- 举报详情 -->
  <view class="form-section">
    <view class="section-title">举报详情</view>
    
    <view class="form-item">
      <textarea 
        class="report-textarea" 
        value="{{reportDetail}}"
        placeholder="请详细描述举报原因，帮助我们更好地处理..."
        bindinput="onDetailChange"
        maxlength="500"
        auto-height
      ></textarea>
      <text class="char-count">{{reportDetail.length}}/500</text>
    </view>
  </view>

  <!-- 证据上传 -->
  <view class="form-section">
    <view class="section-title">上传证据（可选）</view>
    
    <view class="evidence-upload">
      <view class="upload-grid">
        <view 
          class="upload-item"
          wx:for="{{evidenceImages}}" 
          wx:key="index"
        >
          <image class="evidence-image" src="{{item}}" mode="aspectFill"></image>
          <view class="remove-btn" bindtap="removeEvidence" data-index="{{index}}">
            <text class="remove-icon">×</text>
          </view>
        </view>
        
        <view class="upload-btn" bindtap="chooseEvidence" wx:if="{{evidenceImages.length < 4}}">
          <text class="upload-icon">+</text>
          <text class="upload-text">添加图片</text>
        </view>
      </view>
      <text class="upload-tip">最多上传4张图片，每张不超过5MB</text>
    </view>
  </view>

  <!-- 联系方式 -->
  <view class="form-section">
    <view class="section-title">联系方式（可选）</view>
    
    <view class="form-item">
      <input 
        class="contact-input" 
        value="{{contactInfo}}"
        placeholder="留下您的联系方式，方便我们反馈处理结果"
        bindinput="onContactChange"
      />
    </view>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-section">
    <button class="submit-btn btn-primary" bindtap="submitReport" loading="{{isSubmitting}}">
      {{isSubmitting ? '提交中...' : '提交举报'}}
    </button>
  </view>

  <!-- 举报须知 -->
  <view class="notice-section">
    <view class="notice-title">举报须知</view>
    <view class="notice-content">
      <text class="notice-item">• 请确保举报内容真实有效</text>
      <text class="notice-item">• 恶意举报将被追究责任</text>
      <text class="notice-item">• 我们将在3个工作日内处理您的举报</text>
      <text class="notice-item">• 处理结果将通过消息通知您</text>
    </view>
  </view>
</view>